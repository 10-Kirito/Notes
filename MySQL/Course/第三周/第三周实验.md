# 第三周实验

# （1）验证在1000万个以上记录时索引和不索引时查询时间区别

​	本次实验实验数据定为1000万，然后针对学生表进行索引和不索引时查询时间的比较，我们针对`phone_number`这一列进行比较，在创建索引之前的话，我们执行下面代码所花费的时间如下图所示：

![image-20221214140206283](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214140206283.png)

我们加上索引：

![image-20221214140341357](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214140341357.png)

再次执行该代码花费时间如下图如所示：

![image-20221214140305620](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214140305620.png)

我们可以清楚的看到索引的时候进行查询，可以减少我们的查询时间，该代码所花费时间一共减少了7s492ms，可以看到减少的时间还是挺多的。接下来我们更换另外一组代码进行测试：

***有索引：***

![image-20221214140739184](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214140739184.png)

***没有索引：***

![image-20221214140609017](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214140609017.png)

我们可以看到本次代码的时间也是减少了4s多。

# （2）查询2011年进校年龄大于20岁的男学生的学号和姓名

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214141922955.png" alt="image-20221214141922955"  />

***检索结果：***

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214141937013.png" alt="image-20221214141937013" style="zoom:67%;" />

# （3）检索刘晓明不学的课程的课程号

![image-20221214143158213](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214143158213.png)

***检索结果：***

![image-20221214143221936](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214143221936.png)

# （4）检索马小红老师所授课程的学年，学期，课程号，上课时间。

![image-20221214143701933](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214143701933.png)

***检索结果：***

![image-20221214143723814](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214143723814.png)

# （5）查询计算机学院男生总评成绩及格、教授开设的课程的课程号、课名、开课教师姓名，按开课教师升序，课程号降序排序。

在这里使用两种不同的语法进行查询：

```mysql
-- 方法一:
select distinct select_class.class_id, class.class_name, teacher.teacher_name
from select_class, class, teacher
where select_class.score >= 60
    and teacher.teacher_id = select_class.teacher_id
    and class.class_id = select_class.class_id
order by  teacher.teacher_name asc ,select_class.class_id desc;

-- 方法二:
select distinct s.class_id, c.class_name, t.teacher_name
from select_class s
inner join class c on s.class_id = c.class_id
inner join teacher t on s.teacher_id = t.teacher_id
where s.score >= 60
order by t.teacher_name asc ,s.class_id desc ;
```

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214160009010.png" alt="image-20221214160009010" style="zoom:67%;" />

***检索结果：***

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214160035301.png" alt="image-20221214160035301" style="zoom:80%;" />

# （6） 检索学号比张颖同学大，年龄比张颖同学小的同学学号、姓名。

```mysql
select student_id, student_name
from student
where student_id >= (select student_id from student where student_name = '张颖')
and date(birthday) > (select date(birthday) from student where student_name = '张颖');
```

***检索结果：***

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214160745439.png" alt="image-20221214160745439" style="zoom:80%;" />

# （7）检索同时选修了“08305001”和“08305002”的学生学号和姓名。

```mysql
select student.student_id, student.student_name
from student
where student.student_id in (select student_id
                    from select_class
                    where class_id in ('08305001','08305002')
                    group by student_id
                    having count(*) >= 2)
```

***检索结果：***

![image-20221214163632875](C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221214163632875.png)