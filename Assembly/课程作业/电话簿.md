# 实现电话号码表的增删查改功能

[TOC]

# 一. 具体功能实现：

## 1.0 电话号码表在内存中的结构

电话号码表中联系人的相关联系人的信息在内存中的结构如下如所示：

| 076C：0018     | ..kirito                ..17698266260       | -------------->38Bytes     |
| -------------- | ------------------------------------------- | -------------------------- |
| **076C：003E** | **..Sam                   ..12345678909**   | **-------------->38Bytes** |
| **076C：0064** | **..Kite                    ..12345343434** | **-------------->38Bytes** |
| **076C：008A** | **..Siri                    ..12345343434** | **-------------->38Bytes** |

代码中定义：

```assem
tel_tab db 80 dup(20,?,20 dup(' '),32,12,?,12 dup(0),32);存储人名和电话号码
```

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030150346971.png" alt="image-20221030150346971" style="zoom: 50%;" />

## 1.1 实验程序的整体架构

主函数所做的事情就是一直循环输出功能列表，用户选择相应的功能之后开始执行相关的操作。

该部分很简单：就是首先屏幕会输出一个列表。上面是功能介绍，本次实验的具体功能有：

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030151111207.png" alt="image-20221030151111207" style="zoom:80%;" />

每一次会提示用户输入一个字符，接着会根据输入的具体的字符进行判断而去执行不同的子程序。

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030152232884.png" alt="image-20221030152232884" style="zoom: 67%;" />

## 1.2 查询联系人功能

首先会提示用户输入要查询的联系人的姓名，本次实验中只提供了根据姓名去寻找指定联系人的功能。

接着遍历即可。

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030152737946.png" alt="image-20221030152737946" style="zoom:80%;" />

## 1.3 添加联系人的功能

该实验中，其中有一个全局变量来存储电话簿中存储的联系人的总数，很多功能的都是根据这个变量来实现的，除此之外还有一个变量来存储该电话簿最多存储的联系人的总数。

我们添加联系人的时候，首先先确定我们即将添加的联系人准备存储的内存位置，然后将数据存入其中，最后将当前电话簿的联系人的总数加一。

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030153134938.png" alt="image-20221030153134938" style="zoom:80%;" />

## 1.4 删除联系人的功能实现

该功能实现的时候借助于前面已经造好的轮子，即联系人寻找功能。首先会提示输入要删除的联系人的姓名，接着会在电话簿中遍历寻找该联系人，如果未找到的话，说明该电话簿中不存在该联系人，结束程序。如果找到的话，计算最后一位联系人的内存位置，并且将该联系人的数据放在我们要删除的联系人的内存位置，替换掉，当前总人数减一即可。

注意一点就是，如果联系人总人数为1的话，我们可以直接将当前总人数减一即可完成删除联系人的目的。

相关流程图如下:

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030154124211.png" alt="image-20221030154124211" style="zoom:80%;" />

## 1.5 修改联系人信息功能实现

该处功能的实现就是查询联系任何添加联系人的功能的结合，较为简单，暂不展开阐述。

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030154452809.png" alt="image-20221030154452809" style="zoom:80%;" />

## 1.6 输出整个电话表的信息

根据当前电话簿中的总人数来进行输出和每一个联系人的内存位置的查找。

如果当前人数为0的话，输出电话簿为空，否则就先取出第一个联系人的内存地址，将其中的信息一个一个字符进行输出，电话号码和姓名直接用空格隔开。

<img src="C:\Users\z1769\AppData\Roaming\Typora\typora-user-images\image-20221030154911177.png" alt="image-20221030154911177" style="zoom:80%;" />

